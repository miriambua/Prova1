<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Audio guida</title>
</head>
<body style="background-color: #000; display: flex; justify-content: center; align-items: center; height: 100vh;">

  <!-- AUDIO con autoplay e muted abilitato -->
  <audio id="audioPlayer" controls muted autoplay style="width: 50%;">
    <source id="audioSource" src="" type="audio/mpeg">
    Il tuo browser non supporta l'audio HTML5.
  </audio>

<script>
  document.addEventListener("DOMContentLoaded", function () {
    const lang = navigator.language || navigator.userLanguage;
    const player = document.getElementById("audioPlayer");
    const source = document.getElementById("audioSource");

    const url_it = "https://museicapitolini-preprod.comune.roma.it/mcap-div-be/media/audio/2";
    const url_en = "https://museicapitolini-preprod.comune.roma.it/mcap-div-be/media/audio/3";

    // Seleziona la lingua
    source.src = lang.startsWith("it") ? url_it : url_en;

    player.load();

    // Tentativo di autoplay con audio disattivato, poi attivato subito dopo
    player.play().then(() => {
      // ⚠️ In alcuni browser il suono parte, in altri resta silenzioso o bloccato
      player.muted = false;
      console.log("Autoplay riuscito, audio attivato.");
    }).catch((err) => {
      console.warn("Autoplay bloccato dal browser:", err);
      // Se necessario, mostra un messaggio o fallback
    });
  });
</script>

</body>
</html>
